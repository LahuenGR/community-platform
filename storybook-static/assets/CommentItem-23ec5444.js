import{a as e,j as a,F as H}from"./jsx-runtime-913be41c.js";import{r as t}from"./index-2506bfc3.js";import{B as y}from"./Button-82517beb.js";import{C as j}from"./ConfirmModal-dc1effc8.js";import{E as F}from"./EditComment-19328dcc.js";import{L as N}from"./LinkifyText-35502f20.js";import{M as O}from"./Modal-edae582c.js";import{U as z}from"./Username-259912a7.js";import{B as L,F as i,b as c}from"./theme-ui-components.esm-784287e5.js";const U=129,G=n=>n?new Date(n).toLocaleDateString("en-GB").replace(/\//g,"-"):"",w=n=>{const o=t.createRef(),[C,l]=t.useState(!1),[g,s]=t.useState(!1),[S,E]=t.useState(0),[d,I]=t.useState(!1),{comment:M,handleDelete:u,handleEditRequest:f,handleEdit:h,isReply:_}=n,{text:p,creatorName:D,creatorCountry:b,isUserVerified:R,isEditable:q,_created:v,_edited:x,_id:r}=M,B=G(x||v),T=d?"max-content":"128px";t.useEffect(()=>{o.current&&E(o.current.scrollHeight)},[o]);const V=()=>{I(!d)},k=m=>{if(f)return f(m),l(!0)};return e(L,{id:`comment:${r}`,"data-cy":"comment",children:a(i,{sx:{flexDirection:"column"},children:[a(i,{sx:{alignItems:"stretch",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start"},children:[a(i,{sx:{alignItems:"baseline",gap:2},children:[e(z,{user:{userName:D,countryCode:b},isVerified:!!R}),x&&e(c,{sx:{fontSize:0,color:"grey"},children:"(Edited)"}),e(c,{sx:{fontSize:1},children:B})]}),e(i,{sx:{flexGrow:1,gap:2,justifyContent:["flex-start","flex-start","flex-end"],opacity:.5,width:["100%","auto"],":hover":{opacity:1}},children:q&&a(H,{children:[e(y,{"data-cy":"CommentItem: edit button",variant:"outline",small:!0,icon:"edit",onClick:()=>k(r),children:"edit"}),e(y,{"data-cy":"CommentItem: delete button",variant:"outline",small:!0,icon:"delete",onClick:()=>s(!0),children:"delete"})]})})]}),e(c,{"data-cy":"comment-text",mt:2,mb:2,sx:{fontFamily:"body",lineHeight:1.3,maxHeight:T,overflow:"hidden",whiteSpace:"pre-wrap",wordBreak:"break-word"},ref:o,children:e(N,{children:p})}),S>U&&e("a",{onClick:V,style:{color:"gray",cursor:"pointer",fontSize:"14px"},children:d?"Show less":"Show more"}),e(O,{width:600,isOpen:C,children:e(F,{isReply:_,comment:p,handleSubmit:m=>{h&&h(r,m),l(!1)},handleCancel:()=>l(!1)})}),e(j,{isOpen:g,message:"Are you sure you want to delete this comment?",confirmButtonText:"Delete",handleCancel:()=>s(!1),handleConfirm:()=>{u&&u(r),s(!1)}})]})})};try{w.displayName="CommentItem",w.__docgenInfo={description:"",displayName:"CommentItem",props:{comment:{defaultValue:null,description:"",name:"comment",required:!0,type:{name:"IComment"}},handleDelete:{defaultValue:null,description:"",name:"handleDelete",required:!1,type:{name:"((commentId: string) => Promise<void>)"}},handleEdit:{defaultValue:null,description:"",name:"handleEdit",required:!1,type:{name:"((commentId: string, newCommentText: string) => void)"}},handleEditRequest:{defaultValue:null,description:"",name:"handleEditRequest",required:!1,type:{name:"((commentId: string) => Promise<void>)"}},isReply:{defaultValue:null,description:"",name:"isReply",required:!0,type:{name:"boolean"}}}}}catch{}export{w as C};
//# sourceMappingURL=CommentItem-23ec5444.js.map
